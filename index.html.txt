<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê¸ì • í™•ì–¸ ëª…ìƒì¹´ë“œ Â· ë‹¨ì¼ íŒŒì¼</title>
  <style>
    :root{
      --bg1:#0e1b2b; --bg2:#09131d; --glass:rgba(255,255,255,.08);
      --ink:#eaf0f7; --muted:#b7c0cc; --accent:#7dd3fc; --accent2:#c4b5fd;
      --border:rgba(255,255,255,.18);
    }
    body{margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));
      color:var(--ink);font-family:Inter,Pretendard,sans-serif;}
    header{position:sticky;top:0;backdrop-filter:blur(10px);background:rgba(0,0,0,.4);}
    .wrap{max-width:1080px;margin:0 auto;padding:18px 16px}
    .title h1{margin:0;font-size:22px;font-weight:900}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .toolbar button{border:none;background:var(--glass);color:inherit;
      padding:10px 12px;border-radius:12px;cursor:pointer}
    .toolbar .primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:white}
    .main{display:grid;grid-template-columns:1fr;gap:16px;padding:16px}
    .stage{display:flex;justify-content:center;align-items:center;min-height:480px}
    .card{width:min(780px,95vw);min-height:420px;perspective:1200px}
    .card-inner{position:relative;width:100%;min-height:420px;transform-style:preserve-3d;transition:transform .7s}
    .card.flipped .card-inner{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;display:grid;grid-template-rows:56% 44%;
      border-radius:22px;background:var(--glass);backface-visibility:hidden}
    .back{transform:rotateY(180deg)}
    .photo{position:relative;overflow:hidden;border-radius:18px}
    .photo img{width:100%;height:100%;object-fit:cover}
    .content{padding:12px}
    .aff{font-size:28px;font-weight:800;line-height:1.4}
    .sub{font-size:15px;color:var(--muted)}
    .sound-gate{position:fixed;inset:auto 16px 16px 16px;display:none;
      gap:10px;align-items:center;justify-content:center;padding:12px 14px;
      background:rgba(0,0,0,.55);backdrop-filter:blur(6px);
      border:1px solid var(--border);border-radius:14px;color:#fff;z-index:50}
    .sound-gate.show{display:flex}
    .sound-gate button{border:none;background:linear-gradient(90deg,var(--accent),var(--accent2));
      color:#fff;padding:10px 12px;border-radius:10px;cursor:pointer}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="title">
      <h1>ê¸ì • í™•ì–¸ ëª…ìƒì¹´ë“œ â€” ë‹¨ì¼ íŒŒì¼</h1>
    </div>
    <div class="toolbar">
      <button id="btnPrev">â¬…ï¸ ì´ì „</button>
      <button id="btnFlip">ğŸ”„ ë’¤ì§‘ê¸°</button>
      <button id="btnNext" class="primary">ë‹¤ìŒ â¡ï¸</button>
      <button id="btnShuffle">ğŸ”€ ì„ê¸°</button>
      <button id="btnTheme">ğŸŒ™/â˜€ï¸ í…Œë§ˆ</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="stage">
    <article class="card" id="card">
      <div class="card-inner">
        <div class="face front">
          <div class="photo"><img id="photoFront" alt="ìì—° ì‚¬ì§„" /></div>
          <div class="content">
            <div class="aff" id="affText">ì˜¤ëŠ˜ì˜ ë‚˜ëŠ” ì°¨ë¶„í•˜ê³  ì„ ëª…í•œ ë§ˆìŒìœ¼ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•œë‹¤.</div>
            <div class="sub" id="affSub">ì‘ì€ í•œ ê±¸ìŒì´ ëª¨ì—¬ í° ë³€í™”ë¥¼ ë§Œë“ ë‹¤.</div>
          </div>
        </div>
        <div class="face back">
          <div class="photo"><img id="photoBack" alt="ìì—° ì‚¬ì§„" /></div>
          <div class="content">
            <div class="aff" id="tipText">4-4-6 í˜¸í¡: 4ì´ˆ ë“¤ìˆ¨ Â· 4ì´ˆ ë©ˆì¶¤ Â· 6ì´ˆ ë‚ ìˆ¨</div>
            <div class="sub" id="tipSub">ì„¸ ë²ˆ ë°˜ë³µí•˜ë©° ì˜¤ëŠ˜ì˜ ê°€ì¥ ì¤‘ìš”í•œ í•œ ê°€ì§€ë¥¼ ë– ì˜¬ë¦½ë‹ˆë‹¤.</div>
          </div>
        </div>
      </div>
    </article>
  </div>
</main>

<div id="soundGate" class="sound-gate">
  ğŸ”ˆ ë¸Œë¼ìš°ì €ê°€ ìë™ì¬ìƒì„ ë§‰ì•˜ìŠµë‹ˆë‹¤.
  <button id="btnEnableSound">ì†Œë¦¬ ì¼œê¸°</button>
</div>

<audio id="natureSound" loop preload="auto" playsinline></audio>

<script>
const IMG = {
  sunrise:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=1600&auto=format&fit=crop",
  sea:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1600&auto=format&fit=crop",
  forest:"https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop"
};

const DECK = [
  { aff:"ì˜¤ëŠ˜ì˜ ë‚˜ëŠ” ì°¨ë¶„í•˜ê³  ì„ ëª…í•œ ë§ˆìŒìœ¼ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•œë‹¤.",
    sub:"ì‘ì€ í•œ ê±¸ìŒì´ ëª¨ì—¬ í° ë³€í™”ë¥¼ ë§Œë“ ë‹¤.",
    tip:"ì•„ì¹¨ ì²« 10ë¶„ ì§‘ì¤‘.",
    tipSub:"ëª©í‘œë¥¼ ì ê³  ìƒìƒ.",
    img:'sunrise',
    sound:"https://cdn.pixabay.com/download/audio/2021/08/04/audio_c3d7fa87f6.mp3?filename=morning-birds-ambient-6311.mp3"},
  { aff:"ë‚˜ëŠ” ì˜¤ëŠ˜ ë§Œë‚  ëª¨ë“  ì´ì—ê²Œ ì¹œì ˆê³¼ ì—¬ìœ ë¥¼ ê±´ë„¨ë‹¤.",
    sub:"ë‚´ê°€ ë³´ì¸ ì¹œì ˆì€ ë˜ëŒì•„ì˜¨ë‹¤.",
    tip:"ë¬¸ ì•ì—ì„œ ë¯¸ì†Œ.",
    tipSub:"ë¨¼ì € ì¸ì‚¬í•˜ê¸°.",
    img:'sea',
    sound:"https://cdn.pixabay.com/download/audio/2022/03/15/audio_c1b81e7fa2.mp3?filename=ocean-waves-ambient-110624.mp3"},
  { aff:"ë‚˜ëŠ” ì§€ê¸ˆ ì´ ìˆœê°„ì— ë¨¸ë¬¸ë‹¤.",
    sub:"ì¡ë…ì´ ë– ì˜¤ë¥´ë©´ ë¶€ë“œëŸ½ê²Œ ë†“ì•„ì¤€ë‹¤.",
    tip:"3-3-3 ì£¼ì˜ í™˜ê¸°.",
    tipSub:"í˜„ì¬ë¡œ ëŒì•„ì˜¤ê¸°.",
    img:'forest',
    sound:"https://cdn.pixabay.com/download/audio/2022/02/15/audio_8a71c5d0f1.mp3?filename=forest-nature-ambient-110602.mp3"}
];

let idx=0;
const player=document.getElementById('natureSound'); player.volume=0.7;
const gate=document.getElementById('soundGate');

function tryPlay(){return player.play().then(()=>gate.classList.remove('show'))
                                  .catch(()=>gate.classList.add('show'));}

function render(){
  const it=DECK[idx];
  document.getElementById('affText').textContent=it.aff;
  document.getElementById('affSub').textContent=it.sub;
  document.getElementById('tipText').textContent=it.tip;
  document.getElementById('tipSub').textContent=it.tipSub;
  document.getElementById('photoFront').src=IMG[it.img];
  document.getElementById('photoBack').src=IMG[it.img];
  if(player.src!==it.sound){player.src=it.sound;}
  tryPlay();
}

function flip(){document.getElementById('card').classList.toggle('flipped');}
function next(){idx=(idx+1)%DECK.length;document.getElementById('card').classList.remove('flipped');render();}
function prev(){idx=(idx-1+DECK.length)%DECK.length;document.getElementById('card').classList.remove('flipped');render();}

render();
['click','touchstart','keydown'].forEach(evt=>{
  window.addEventListener(evt,()=>{if(gate.classList.contains('show')) tryPlay();});
});
document.getElementById('btnEnableSound').addEventListener('click',tryPlay);

document.getElementById('btnFlip').onclick=flip;
document.getElementById('btnNext').onclick=next;
document.getElementById('btnPrev').onclick=prev;
document.getElementById('btnShuffle').onclick=()=>{DECK.sort(()=>Math.random()-.5);idx=0;render();};
document.getElementById('btnTheme').onclick=()=>{document.body.classList.toggle('light');};
</script>
</body>
</html>
